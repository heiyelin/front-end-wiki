<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器本地存储 | Front-End-Wiki</title>
    <meta name="description" content="前端知识库">
    
    <meta property="article:modified_time" content="2020-04-04T10:37:29.000Z"><meta property="og:site_name" content="Front-End-Wiki"><meta property="og:title" content="浏览器本地存储"><meta property="og:type" content="website"><meta property="og:url" content="/guide/html/web-storage.html"><meta name="twitter:title" content="浏览器本地存储"><meta name="twitter:url" content="/guide/html/web-storage.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:label1" content="Written by">
    <link rel="preload" href="/assets/css/0.styles.9e24d197.css" as="style"><link rel="preload" href="/assets/js/app.0d36fc07.js" as="script"><link rel="preload" href="/assets/js/2.b6aa8f81.js" as="script"><link rel="preload" href="/assets/js/38.7605bc0e.js" as="script"><link rel="prefetch" href="/assets/js/10.8bfd4ea1.js"><link rel="prefetch" href="/assets/js/11.fe52658a.js"><link rel="prefetch" href="/assets/js/12.e0e30b8d.js"><link rel="prefetch" href="/assets/js/13.1387d8d2.js"><link rel="prefetch" href="/assets/js/14.8288dbb9.js"><link rel="prefetch" href="/assets/js/15.5d7d6b17.js"><link rel="prefetch" href="/assets/js/16.eecd39ae.js"><link rel="prefetch" href="/assets/js/17.a2d9791b.js"><link rel="prefetch" href="/assets/js/18.3f3747e5.js"><link rel="prefetch" href="/assets/js/19.1cfd61e5.js"><link rel="prefetch" href="/assets/js/20.20c1d3b4.js"><link rel="prefetch" href="/assets/js/21.3b46cf8b.js"><link rel="prefetch" href="/assets/js/22.49b56ccd.js"><link rel="prefetch" href="/assets/js/23.04f55964.js"><link rel="prefetch" href="/assets/js/24.d4de5079.js"><link rel="prefetch" href="/assets/js/25.aba0c982.js"><link rel="prefetch" href="/assets/js/26.731d50fe.js"><link rel="prefetch" href="/assets/js/27.292b230a.js"><link rel="prefetch" href="/assets/js/28.ce5173b2.js"><link rel="prefetch" href="/assets/js/29.863219a8.js"><link rel="prefetch" href="/assets/js/3.6a70c1fb.js"><link rel="prefetch" href="/assets/js/30.398b963b.js"><link rel="prefetch" href="/assets/js/31.8c7b3aa2.js"><link rel="prefetch" href="/assets/js/32.b3465a7f.js"><link rel="prefetch" href="/assets/js/33.51b95476.js"><link rel="prefetch" href="/assets/js/34.040e3223.js"><link rel="prefetch" href="/assets/js/35.a62cada5.js"><link rel="prefetch" href="/assets/js/36.4f915af0.js"><link rel="prefetch" href="/assets/js/37.ec23df85.js"><link rel="prefetch" href="/assets/js/39.b50c2b8b.js"><link rel="prefetch" href="/assets/js/4.f998eb39.js"><link rel="prefetch" href="/assets/js/40.2e9d8fee.js"><link rel="prefetch" href="/assets/js/41.fddf0c31.js"><link rel="prefetch" href="/assets/js/42.ddf5dc0a.js"><link rel="prefetch" href="/assets/js/43.2163f6ed.js"><link rel="prefetch" href="/assets/js/44.97cd1965.js"><link rel="prefetch" href="/assets/js/45.50edd4c2.js"><link rel="prefetch" href="/assets/js/46.dcbd0d34.js"><link rel="prefetch" href="/assets/js/47.ab312a1d.js"><link rel="prefetch" href="/assets/js/48.e29f594f.js"><link rel="prefetch" href="/assets/js/5.bd41f6e8.js"><link rel="prefetch" href="/assets/js/6.cfeabc90.js"><link rel="prefetch" href="/assets/js/7.df74b918.js"><link rel="prefetch" href="/assets/js/8.9b9d0339.js"><link rel="prefetch" href="/assets/js/9.d13b94b4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9e24d197.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Front-End-Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">基础</a></div><div class="nav-item"><a href="/advance/" class="nav-link">进阶</a></div><div class="nav-item"><a href="/dev/" class="nav-link">全栈</a></div><div class="nav-item"><a href="/refer/" class="nav-link">扩展</a></div> <a href="https://github.com/heiyelin/front-end-wiki" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">基础</a></div><div class="nav-item"><a href="/advance/" class="nav-link">进阶</a></div><div class="nav-item"><a href="/dev/" class="nav-link">全栈</a></div><div class="nav-item"><a href="/refer/" class="nav-link">扩展</a></div> <a href="https://github.com/heiyelin/front-end-wiki" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/html/introduce.html" class="sidebar-link">HTML5</a></li><li><a href="/guide/html/web-storage.html" class="active sidebar-link">浏览器本地存储</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/html/web-storage.html#一、cookie" class="sidebar-link">一、Cookie</a></li><li class="sidebar-sub-header"><a href="/guide/html/web-storage.html#二、localstorage" class="sidebar-link">二、localStorage</a></li><li class="sidebar-sub-header"><a href="/guide/html/web-storage.html#三、sessionstorage" class="sidebar-link">三、sessionStorage</a></li><li class="sidebar-sub-header"><a href="/guide/html/web-storage.html#四、indexeddb" class="sidebar-link">四、IndexedDB</a></li><li class="sidebar-sub-header"><a href="/guide/html/web-storage.html#总结" class="sidebar-link">总结</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器本地存储"><a href="#浏览器本地存储" class="header-anchor">#</a> 浏览器本地存储</h1> <h2 id="一、cookie"><a href="#一、cookie" class="header-anchor">#</a> 一、Cookie</h2> <h3 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h3> <p>Cookie 最开始被设计出来并不是作为本地存储的，而是为了弥补 HTTP 在状态管理傻姑娘的不足。由于 HTTP 协议是一个无状态协议，客户端向服务器发送请求，服务器返回响应，一次请求过程就结束了。如果下一次发送请求，服务器并不能区分是否是同一个客户端。</p> <p>Cookie 本质上就是浏览器里面存储的一个很小的文本文件，内部以键值对的方式来存储。向同一个域名下发送请求，都会携带相同的 Cookie，服务器拿到 Cookie 进行解析，便能拿到客户端的状态。</p> <h3 id="缺陷"><a href="#缺陷" class="header-anchor">#</a> 缺陷</h3> <p>Cookie 作为状态存储，有很多缺陷：</p> <ul><li>容量不足。Cookie 的体积上限只有 4KB，只能用来存储少量的信息。</li> <li>性能缺陷。每次请求都会携带同域名下的所有 Cookie，造成不必要的性能浪费。</li> <li>安全性差。由于 Cookie 以纯文本的形式在浏览器和服务器中传递，很容易被非法用户截获，然后进行一系列的篡改，在 Cookie 的有效期内重新发送给服务器，这是相当危险的。另外，在 HttpOnly 为 false 的情况下，Cookie 信息能直接通过 JS 脚本来读取。</li></ul> <h3 id="设置-cookie"><a href="#设置-cookie" class="header-anchor">#</a> 设置 Cookie</h3> <table><thead><tr><th>属性</th> <th>作用</th></tr></thead> <tbody><tr><td>value</td> <td>如果用于保存用户登录态，应该将该值加密，不能使用明文的用户标识</td></tr> <tr><td>http-only</td> <td>不能通过 JS 访问 Cookie，减少 XSS 攻击</td></tr> <tr><td>secure</td> <td>只能在协议为 HTTPS 的请求中携带</td></tr> <tr><td>same-site</td> <td>规定浏览器不能在跨域请求中携带 Cookie，减少 CSRF 攻击</td></tr></tbody></table> <h2 id="二、localstorage"><a href="#二、localstorage" class="header-anchor">#</a> 二、localStorage</h2> <h3 id="介绍-2"><a href="#介绍-2" class="header-anchor">#</a> 介绍</h3> <p>localStorage 是 HTML5 提出的作为持久保存客户端数据的方案。相比 Cookie 来说，它提供了更为直观的 API，且在安全上相对好一点。它具有以下优势：</p> <ul><li><strong>存储量大</strong>：localStorage 的容量上限为 5M。</li> <li><strong>安全性好</strong>：只存储在客户端，不语服务端通信。</li> <li><strong>操作方便</strong>：提供了直观的操作 API</li> <li><strong>持久性强</strong>：如果不主动<code>removeItem()</code>或者<code>clear()</code>，即使关闭浏览器，存储的数据在下一次打开浏览器也还存在。</li></ul> <h3 id="基本操作"><a href="#基本操作" class="header-anchor">#</a> 基本操作</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 保存数据</span>
locaStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'Alin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 读取数据</span>
locaStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除数据</span>
locaStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除所有</span>
localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="三、sessionstorage"><a href="#三、sessionstorage" class="header-anchor">#</a> 三、sessionStorage</h2> <h3 id="介绍-3"><a href="#介绍-3" class="header-anchor">#</a> 介绍</h3> <p>sessionStorage 与 localStorage 相似，不同之处在于 localStorage 里面存储的数据没有过期时间设置，而 Session Storage 只存储当前会话页的数据，且只有当用户关闭当前会话页或浏览器时，数据才会被清除。</p> <h3 id="基本操作-2"><a href="#基本操作-2" class="header-anchor">#</a> 基本操作</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 保存数据</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'Alin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 读取数据</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除数据</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除所有</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="应用场景"><a href="#应用场景" class="header-anchor">#</a> 应用场景</h3> <ul><li>可以用它对表单信息进行维护，将表单信息存储在里面，可以保证页面即使刷新也不会让之前的表单信息丢失。</li> <li>可以用它存储本次浏览记录。如果关闭页面后不需要这些记录，用 sessionStorage 就再合适不过了。</li></ul> <h2 id="四、indexeddb"><a href="#四、indexeddb" class="header-anchor">#</a> 四、IndexedDB</h2> <h3 id="介绍-4"><a href="#介绍-4" class="header-anchor">#</a> 介绍</h3> <p>IndexedDB 是运行在浏览器中的非关系型数据库, 本质上是数据库，用于客户端存储大量结构化数据(包括, 文件/ blobs)，并提供索引功能以实现高性能搜索。它一般用于保存大量用户数据并要求数据之间有搜索需要的场景，当网络断开时，用户就可以做一些离线的操作。它较之 SQL 更为方便，不需要写一些特定的语法对数据进行操作，数据格式是 JSON。</p> <h3 id="特性"><a href="#特性" class="header-anchor">#</a> 特性</h3> <ul><li>支持事务</li> <li>键值对存储。内部采用对象仓库存放数据，在这个对象仓库中数据采用键值对的方式来存储。</li> <li>异步操作。数据库的读写属于 I/O 操作, 浏览器中对异步 I/O 提供了支持。</li> <li>受同源策略限制，即无法访问跨域的数据库。</li></ul> <h3 id="基本操作-3"><a href="#基本操作-3" class="header-anchor">#</a> 基本操作</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API/Using_IndexedDB" target="_blank" rel="noopener noreferrer">使用 IndexedDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <table><thead><tr><th style="text-align:center;">特性</th> <th style="text-align:center;">Cookie</th> <th style="text-align:center;">localStorage</th> <th style="text-align:center;">sessionStorage</th> <th style="text-align:center;">IndexedDB</th></tr></thead> <tbody><tr><td style="text-align:center;">数据生命周期</td> <td style="text-align:center;">一般由服务器生成，可以设置过期时间</td> <td style="text-align:center;">除非被清理，否则一直存在</td> <td style="text-align:center;">页面关闭就清理</td> <td style="text-align:center;">除非被清理，否则一直存在</td></tr> <tr><td style="text-align:center;">数据存储大小</td> <td style="text-align:center;">4K</td> <td style="text-align:center;">5M</td> <td style="text-align:center;">5M</td> <td style="text-align:center;">无限</td></tr> <tr><td style="text-align:center;">与服务端通信</td> <td style="text-align:center;">每次都会携带在 header 中，对于请求性能影响</td> <td style="text-align:center;">不参与</td> <td style="text-align:center;">不参与</td> <td style="text-align:center;">不参与</td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">修订于:</span> <span class="time">2020-04-04 18:37:29</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/html/introduce.html" class="prev">HTML5</a></span> <span class="next"><a href="/guide/css/base.html">CSS 基础</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0d36fc07.js" defer></script><script src="/assets/js/2.b6aa8f81.js" defer></script><script src="/assets/js/38.7605bc0e.js" defer></script>
  </body>
</html>
