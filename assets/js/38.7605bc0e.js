(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{290:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"浏览器本地存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器本地存储"}},[t._v("#")]),t._v(" 浏览器本地存储")]),t._v(" "),s("h2",{attrs:{id:"一、cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、cookie"}},[t._v("#")]),t._v(" 一、Cookie")]),t._v(" "),s("h3",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),s("p",[t._v("Cookie 最开始被设计出来并不是作为本地存储的，而是为了弥补 HTTP 在状态管理傻姑娘的不足。由于 HTTP 协议是一个无状态协议，客户端向服务器发送请求，服务器返回响应，一次请求过程就结束了。如果下一次发送请求，服务器并不能区分是否是同一个客户端。")]),t._v(" "),s("p",[t._v("Cookie 本质上就是浏览器里面存储的一个很小的文本文件，内部以键值对的方式来存储。向同一个域名下发送请求，都会携带相同的 Cookie，服务器拿到 Cookie 进行解析，便能拿到客户端的状态。")]),t._v(" "),s("h3",{attrs:{id:"缺陷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缺陷"}},[t._v("#")]),t._v(" 缺陷")]),t._v(" "),s("p",[t._v("Cookie 作为状态存储，有很多缺陷：")]),t._v(" "),s("ul",[s("li",[t._v("容量不足。Cookie 的体积上限只有 4KB，只能用来存储少量的信息。")]),t._v(" "),s("li",[t._v("性能缺陷。每次请求都会携带同域名下的所有 Cookie，造成不必要的性能浪费。")]),t._v(" "),s("li",[t._v("安全性差。由于 Cookie 以纯文本的形式在浏览器和服务器中传递，很容易被非法用户截获，然后进行一系列的篡改，在 Cookie 的有效期内重新发送给服务器，这是相当危险的。另外，在 HttpOnly 为 false 的情况下，Cookie 信息能直接通过 JS 脚本来读取。")])]),t._v(" "),s("h3",{attrs:{id:"设置-cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置-cookie"}},[t._v("#")]),t._v(" 设置 Cookie")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("value")]),t._v(" "),s("td",[t._v("如果用于保存用户登录态，应该将该值加密，不能使用明文的用户标识")])]),t._v(" "),s("tr",[s("td",[t._v("http-only")]),t._v(" "),s("td",[t._v("不能通过 JS 访问 Cookie，减少 XSS 攻击")])]),t._v(" "),s("tr",[s("td",[t._v("secure")]),t._v(" "),s("td",[t._v("只能在协议为 HTTPS 的请求中携带")])]),t._v(" "),s("tr",[s("td",[t._v("same-site")]),t._v(" "),s("td",[t._v("规定浏览器不能在跨域请求中携带 Cookie，减少 CSRF 攻击")])])])]),t._v(" "),s("h2",{attrs:{id:"二、localstorage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、localstorage"}},[t._v("#")]),t._v(" 二、localStorage")]),t._v(" "),s("h3",{attrs:{id:"介绍-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍-2"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),s("p",[t._v("localStorage 是 HTML5 提出的作为持久保存客户端数据的方案。相比 Cookie 来说，它提供了更为直观的 API，且在安全上相对好一点。它具有以下优势：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("存储量大")]),t._v("：localStorage 的容量上限为 5M。")]),t._v(" "),s("li",[s("strong",[t._v("安全性好")]),t._v("：只存储在客户端，不语服务端通信。")]),t._v(" "),s("li",[s("strong",[t._v("操作方便")]),t._v("：提供了直观的操作 API")]),t._v(" "),s("li",[s("strong",[t._v("持久性强")]),t._v("：如果不主动"),s("code",[t._v("removeItem()")]),t._v("或者"),s("code",[t._v("clear()")]),t._v("，即使关闭浏览器，存储的数据在下一次打开浏览器也还存在。")])]),t._v(" "),s("h3",{attrs:{id:"基本操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本操作"}},[t._v("#")]),t._v(" 基本操作")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 保存数据")]),t._v("\nlocaStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Alin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取数据")]),t._v("\nlocaStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除数据")]),t._v("\nlocaStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除所有")]),t._v("\nlocalStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h2",{attrs:{id:"三、sessionstorage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、sessionstorage"}},[t._v("#")]),t._v(" 三、sessionStorage")]),t._v(" "),s("h3",{attrs:{id:"介绍-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍-3"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),s("p",[t._v("sessionStorage 与 localStorage 相似，不同之处在于 localStorage 里面存储的数据没有过期时间设置，而 Session Storage 只存储当前会话页的数据，且只有当用户关闭当前会话页或浏览器时，数据才会被清除。")]),t._v(" "),s("h3",{attrs:{id:"基本操作-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本操作-2"}},[t._v("#")]),t._v(" 基本操作")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 保存数据")]),t._v("\nsessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Alin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取数据")]),t._v("\nsessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除数据")]),t._v("\nsessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除所有")]),t._v("\nsessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),s("ul",[s("li",[t._v("可以用它对表单信息进行维护，将表单信息存储在里面，可以保证页面即使刷新也不会让之前的表单信息丢失。")]),t._v(" "),s("li",[t._v("可以用它存储本次浏览记录。如果关闭页面后不需要这些记录，用 sessionStorage 就再合适不过了。")])]),t._v(" "),s("h2",{attrs:{id:"四、indexeddb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、indexeddb"}},[t._v("#")]),t._v(" 四、IndexedDB")]),t._v(" "),s("h3",{attrs:{id:"介绍-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍-4"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),s("p",[t._v("IndexedDB 是运行在浏览器中的非关系型数据库, 本质上是数据库，用于客户端存储大量结构化数据(包括, 文件/ blobs)，并提供索引功能以实现高性能搜索。它一般用于保存大量用户数据并要求数据之间有搜索需要的场景，当网络断开时，用户就可以做一些离线的操作。它较之 SQL 更为方便，不需要写一些特定的语法对数据进行操作，数据格式是 JSON。")]),t._v(" "),s("h3",{attrs:{id:"特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特性"}},[t._v("#")]),t._v(" 特性")]),t._v(" "),s("ul",[s("li",[t._v("支持事务")]),t._v(" "),s("li",[t._v("键值对存储。内部采用对象仓库存放数据，在这个对象仓库中数据采用键值对的方式来存储。")]),t._v(" "),s("li",[t._v("异步操作。数据库的读写属于 I/O 操作, 浏览器中对异步 I/O 提供了支持。")]),t._v(" "),s("li",[t._v("受同源策略限制，即无法访问跨域的数据库。")])]),t._v(" "),s("h3",{attrs:{id:"基本操作-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本操作-3"}},[t._v("#")]),t._v(" 基本操作")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API/Using_IndexedDB",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 IndexedDB"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("特性")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("Cookie")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("localStorage")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("sessionStorage")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("IndexedDB")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("数据生命周期")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("一般由服务器生成，可以设置过期时间")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("除非被清理，否则一直存在")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("页面关闭就清理")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("除非被清理，否则一直存在")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("数据存储大小")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("4K")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("5M")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("5M")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("无限")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("与服务端通信")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("每次都会携带在 header 中，对于请求性能影响")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("不参与")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("不参与")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("不参与")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);