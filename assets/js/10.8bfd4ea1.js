(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{265:function(t,e,s){"use strict";s.r(e);var a=s(2),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"dom-编程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom-编程"}},[t._v("#")]),t._v(" DOM 编程")]),t._v(" "),s("h2",{attrs:{id:"浏览器环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器环境"}},[t._v("#")]),t._v(" 浏览器环境")]),t._v(" "),s("p",[t._v("JavaScript 语言最初是为 Web 浏览器创建的。Web 浏览器作为宿主环境，提供了很多 API 来满足查看网页、图片、音视频等需求。下面是浏览器在 Javascript 运行时的鸟瞰图。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://allin-bucket.oss-cn-beijing.aliyuncs.com/blog/dom-web-2019-12-25.png?x-oss-process=style/alin",alt:"dom-web-2019-12-25.png"}})]),t._v(" "),s("p",[t._v("浏览器环境由三部分组成：")]),t._v(" "),s("ol",[s("li",[t._v("DOM(文档对象模型)标准")])]),t._v(" "),s("p",[t._v("描述文档的结构、操作和事件，参见 https://dom.spec.whatwg.org。")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("CSSOM 标准")])]),t._v(" "),s("p",[t._v("介绍样式表和样式规则，对它们的操作及其对文档的绑定，参见 https://www.w3.org/TR/cssom-1/.")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("HTML 标准")])]),t._v(" "),s("p",[t._v("介绍 HTML 语言（例如标签）以及 BOM（浏览器对象模型）—— 各种浏览器函数："),s("code",[t._v("setTimeout")]),t._v("、"),s("code",[t._v("alert")]),t._v("、"),s("code",[t._v("location")]),t._v(" 等等，请参阅 https://html.spec.whatwg.org。它采用了 DOM 规范并为其扩展了许多属性和方法。")]),t._v(" "),s("h2",{attrs:{id:"dom-树"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom-树"}},[t._v("#")]),t._v(" DOM 树")]),t._v(" "),s("p",[t._v("浏览器会将 HTML/XML 解析为 DOM 树。")]),t._v(" "),s("h3",{attrs:{id:"节点类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#节点类型"}},[t._v("#")]),t._v(" 节点类型")]),t._v(" "),s("p",[t._v("有 12 种节点类型。实际上，通常用到的有以下几个：")]),t._v(" "),s("ul",[s("li",[s("strong",[s("code",[t._v("document")])]),t._v("：DOM 树的根节点")]),t._v(" "),s("li",[s("strong",[t._v("元素节点")]),t._v("：HTML 标签，“树枝”")]),t._v(" "),s("li",[s("strong",[t._v("文本节点")]),t._v("：纯文本，“树叶”")]),t._v(" "),s("li",[s("strong",[t._v("注释节点")]),t._v("：注释")])]),t._v(" "),s("h3",{attrs:{id:"访问-dom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问-dom"}},[t._v("#")]),t._v(" 访问 DOM")]),t._v(" "),s("p",[t._v("DOM 让我们可以对元素和它们其中的内容做任何事，但是首先我们需要获取到对应的 DOM 对象，把这个对象赋予一个变量，然后我们才能修改这个对象。")]),t._v(" "),s("p",[t._v("对 DOM 的所有操作都是从 "),s("code",[t._v("document")]),t._v(" 对象开始的。从这个对象我们可以到达任何节点。下图描述的是 DOM 节点之间的联系。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://allin-bucket.oss-cn-beijing.aliyuncs.com/blog/dom-%E9%81%8D%E5%8E%86dom%E6%A0%91-2019-12-25.png?x-oss-process=style/alin",alt:"dom-遍历dom树-2019-12-25.png"}})]),t._v(" "),s("h4",{attrs:{id:"_1-根节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-根节点"}},[t._v("#")]),t._v(" 1. 根节点")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("document")]),t._v("：是整个 DOM 树的根节点。")]),t._v(" "),s("li",[s("code",[t._v("document.documentElement")]),t._v("：对应"),s("code",[t._v("<html>")]),t._v("标签的节点。")]),t._v(" "),s("li",[s("code",[t._v("document.body")]),t._v("：对应"),s("code",[t._v("<body>")]),t._v("标签的节点。")]),t._v(" "),s("li",[s("code",[t._v("document.head")]),t._v("：对应"),s("code",[t._v("<head>")]),t._v("标签的节点。")])]),t._v(" "),s("h4",{attrs:{id:"_2-父节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-父节点"}},[t._v("#")]),t._v(" 2. 父节点")]),t._v(" "),s("p",[t._v("父节点可以通过 "),s("code",[t._v("parentNode")]),t._v(" 访问。")]),t._v(" "),s("h4",{attrs:{id:"_3-子节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-子节点"}},[t._v("#")]),t._v(" 3. 子节点")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("childNodes")]),t._v(": 集合提供了对所有子节点包括其中文本节点的访问。")]),t._v(" "),s("li",[s("code",[t._v("firstChild")]),t._v(": 访问第一个子元素。")]),t._v(" "),s("li",[s("code",[t._v("lastChild")]),t._v(": 访问最后一个子元素。")])]),t._v(" "),s("h4",{attrs:{id:"_4-兄弟节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-兄弟节点"}},[t._v("#")]),t._v(" 4. 兄弟节点")]),t._v(" "),s("p",[t._v("兄弟节点可以通过 "),s("code",[t._v("nextSibling")]),t._v(" 和 "),s("code",[t._v("previousSibling")]),t._v(" 访问。")]),t._v(" "),s("h4",{attrs:{id:"_5-元素节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-元素节点"}},[t._v("#")]),t._v(" 5. 元素节点")]),t._v(" "),s("p",[s("code",[t._v("childNodes")]),t._v(" 不仅存在元素节点，还有文本节点，甚至是注释节点。在日常的使用中，我们更多的是只需要访问元素节点，排除掉其他干扰节点。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://allin-bucket.oss-cn-beijing.aliyuncs.com/blog/dom-%E8%AE%BF%E9%97%AE%E5%85%83%E7%B4%A0%E8%8A%82%E7%82%B9-2019-12-25.png?x-oss-process=style/alin",alt:"dom-访问元素节点-2019-12-25.png"}})]),t._v(" "),s("ul",[s("li",[s("code",[t._v("parentElement")]),t._v("：父元素节点")]),t._v(" "),s("li",[s("code",[t._v("children")]),t._v("：只获取类型为元素节点的子节点。")]),t._v(" "),s("li",[s("code",[t._v("firstElementChild, lasElementChild")]),t._v(" ： 第一个和最后一个子元素节点。")]),t._v(" "),s("li",[s("code",[t._v("previousElementSibling, nextElementSibling")]),t._v("：前一个和后一个兄弟元素节点。")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[s("code",[t._v("document.documentElement")]),t._v(" 没有 "),s("code",[t._v("parentElement")]),t._v(" 。因为 "),s("code",[t._v("document.documentElement")]),t._v(" 的父节点是 "),s("code",[t._v("document")]),t._v(" ，但 "),s("code",[t._v("document")]),t._v(" 不是一个元素节点。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// document")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// null")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])]),t._v(" "),s("h4",{attrs:{id:"_6-访问-dom-节点的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-访问-dom-节点的方法"}},[t._v("#")]),t._v(" 6. 访问 DOM 节点的方法")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("document.getElementById")])]),t._v(" "),s("p",[t._v("id 必须唯一，文档中给定的 id 只能有唯一一个元素。\n如果有多个元素具有同名 id，那么对应方法的行为将不可预测。浏览器将随机返回其他的一个。因此未来保证 id 的唯一性，请严格遵守规则。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("getElementsBy*")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("getElementByTagsName(tag)")]),t._v("——用给点的标签来查找元素。")]),t._v(" "),s("li",[s("code",[t._v("getElementsByClassName(className)")]),t._v("——返回具有给点 CSS 类的元素。")]),t._v(" "),s("li",[s("code",[t._v("getElementsByName(name)")]),t._v("——返回具有给点 "),s("code",[t._v("name")]),t._v(" 属性的元素。很少使用。")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("querySelectorAll")]),t._v(" 和 "),s("code",[t._v("querySelector")])]),t._v(" "),s("p",[s("code",[t._v("elem.querySelectorAll(css)")]),t._v("——返回与给定 CSS 选择器匹配的 "),s("code",[t._v("elem")]),t._v(" 中的所有元素。\n"),s("code",[t._v("elem.querySelector(css)")]),t._v("——返回给定 CSS 选择器的第一个元素。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("matches")]),t._v(" "),s("code",[t._v("elem.matchs(css)")]),t._v("——检查 "),s("code",[t._v("elem")]),t._v(" 是否匹配给点的 CSS 选择器。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("closet")]),t._v(" "),s("code",[t._v("elem.closet(css)")]),t._v(" ——查找与 CSS 选择器匹配的最接近的祖先。")])])]),t._v(" "),s("h2",{attrs:{id:"dom-节点类与节点属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom-节点类与节点属性"}},[t._v("#")]),t._v(" DOM 节点类与节点属性")]),t._v(" "),s("h3",{attrs:{id:"dom-节点类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom-节点类"}},[t._v("#")]),t._v(" DOM 节点类")]),t._v(" "),s("p",[t._v("DOM 节点因为它们的类而具有不同的属性。例如，标记 "),s("code",[t._v("<a>")]),t._v(" 相对应的元素节点具有链接相关的属性，标记 "),s("code",[t._v("<input>")]),t._v(" 对应元素节点具有的输入相关的属性等。文本节点不同于元素节点，但是它们之间也存在共有的属性和方法，因为所有的 DOM 节点都形成一个单一层次的结构。")]),t._v(" "),s("p",[t._v("每个 DOM 节点都有与之对应的内置类。层次的根节点是 "),s("a",{attrs:{href:"https://dom.spec.whatwg.org/#eventtarget",target:"_blank",rel:"noopener noreferrer"}},[t._v("EventTarget"),s("OutboundLink")],1),t._v("，"),s("a",{attrs:{href:"http://dom.spec.whatwg.org/#interface-node",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node"),s("OutboundLink")],1),t._v(" 继承自它，其他 DOM 节点也继承自它。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://allin-bucket.oss-cn-beijing.aliyuncs.com/blog/dom-%E8%8A%82%E7%82%B9%E7%B1%BB-2019-12-25.png?x-oss-process=style/alin",alt:"dom-节点类-2019-12-25.png"}})]),t._v(" "),s("p",[t._v("类如下所示：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://dom.spec.whatwg.org/#eventtarget",target:"_blank",rel:"noopener noreferrer"}},[t._v("EventTarget"),s("OutboundLink")],1),t._v(" —— 是根的“抽象”类。该类的对象从未被创建。它作为一个基础，为了让所有 DOM 节点都支持所谓的“事件”，我们会在之后对它进行学习。")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://dom.spec.whatwg.org/#interface-node",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node"),s("OutboundLink")],1),t._v(" —— 也是一个“抽象”类，充当 DOM 节点的基础。它提供了树的核心功能："),s("code",[t._v("parentNode")]),t._v("、"),s("code",[t._v("nextSibling")]),t._v("、"),s("code",[t._v("childNodes")]),t._v(" 等（它们都是 getter）。"),s("code",[t._v("Node")]),t._v(" 类的对象从未被创建。但是一些具体的节点类却继承自它，例如："),s("code",[t._v("Text")]),t._v(" 表示文本节点，"),s("code",[t._v("Element")]),t._v(" 用于元素节点，以及更多外来的类（如注释节点 "),s("code",[t._v("Comment")]),t._v("）。")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://dom.spec.whatwg.org/#interface-element",target:"_blank",rel:"noopener noreferrer"}},[t._v("Element"),s("OutboundLink")],1),t._v(" —— 是 DOM 元素的基类。它提供了元素级的导航，比如 "),s("code",[t._v("nextElementSibling")]),t._v("、"),s("code",[t._v("children")]),t._v(" 以及像 "),s("code",[t._v("getElementsByTagName")]),t._v("、"),s("code",[t._v("querySelector")]),t._v(" 这样的搜索方法。浏览器中不仅有 HTML，还会有 XML 和 SVG 文档。"),s("code",[t._v("Element")]),t._v(" 类充当以下更具体类的基类："),s("code",[t._v("SVGElement")]),t._v("、"),s("code",[t._v("XMLElement")]),t._v(" 和 "),s("code",[t._v("HTMLElement")]),t._v("。")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/dom.html#htmlelement",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTMLElement"),s("OutboundLink")],1),t._v("—— 最终会成为所有 HTML 元素的基类。由各种 HTML 元素继承：\n"),s("ul",[s("li",[s("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/forms.html#htmlinputelement",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTMLInputElement"),s("OutboundLink")],1),t._v(" —— "),s("code",[t._v("<input>")]),t._v(" 元素的类，")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/semantics.html#htmlbodyelement",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTMLBodyElement"),s("OutboundLink")],1),t._v(" —— "),s("code",[t._v("<body>")]),t._v(" 元素的类，")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/semantics.html#htmlanchorelement",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTMLAnchorElement"),s("OutboundLink")],1),t._v(" —— "),s("code",[t._v("<a>")]),t._v(" 元素的类，")]),t._v(" "),s("li",[t._v("等等，每个标记都有可以为自己提供特定属性和方法的类。")])])])]),t._v(" "),s("p",[t._v("因此，给定节点的全部属性和方法都是继承的结果。")]),t._v(" "),s("p",[t._v("例如，我们考虑一下 "),s("code",[t._v("<input>")]),t._v(" 元素的 DOM 对象。它属于 "),s("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/forms.html#htmlinputelement",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTMLInputElement"),s("OutboundLink")],1),t._v(" 类。它将属性和方法作为以下内容的叠加：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("HTMLInputElement")]),t._v(" —— 该类提供特定于输入的属性，而且可以继承…")]),t._v(" "),s("li",[s("code",[t._v("HTMLElement")]),t._v(" —— 它提供了通用 HTML 元素方法（getter 和 setter），而且可以继承自其它属性。")]),t._v(" "),s("li",[s("code",[t._v("Element")]),t._v(" —— 提供泛型元素方法，而且可以继承自其它属性。")]),t._v(" "),s("li",[s("code",[t._v("Node")]),t._v(" —— 提供通用 DOM 节点属性，而且可以继承自其它属性。")]),t._v(" "),s("li",[s("code",[t._v("EventTarget")]),t._v(" —— 为事件（包括事件本身）提供支持，")]),t._v(" "),s("li",[t._v("最后，它继承了 "),s("code",[t._v("Object")]),t._v("，因为像 "),s("code",[t._v("hasOwnProperty")]),t._v(" 的“纯对象”方法也是可用的。")])]),t._v(" "),s("h3",{attrs:{id:"节点属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#节点属性"}},[t._v("#")]),t._v(" 节点属性")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("nodeType")]),t._v(" 属性")])]),t._v(" "),s("ul",[s("li",[t._v("元素节点—— "),s("code",[t._v("nodeType = 1")])]),t._v(" "),s("li",[t._v("文本节点—— "),s("code",[t._v("nodeType = 3")])]),t._v(" "),s("li",[s("code",[t._v("document")]),t._v("节点—— "),s("code",[t._v("nodeType = 9")])])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("code",[t._v("nodeName")]),t._v(" 与 "),s("code",[t._v("tagName")])])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("tagName")]),t._v("属性仅用于 "),s("code",[t._v("Element")]),t._v("节点。")]),t._v(" "),s("li",[s("code",[t._v("nodeName")]),t._v("属性用于所有 "),s("code",[t._v("Node")]),t._v("节点：\n"),s("ul",[s("li",[t._v("对于元素节点，与 "),s("code",[t._v("tagName")]),t._v("一致。")]),t._v(" "),s("li",[t._v("对于其他节点，则是一个字符串的节点类型。如 "),s("code",[t._v("#document")]),t._v(" ， "),s("code",[t._v("#comment")])])])])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("code",[t._v("innerHTML")]),t._v(", "),s("code",[t._v("outerHTML")]),t._v(", "),s("code",[t._v("textContent")])])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("innerHTML")]),t._v("赋值会完全重写。")]),t._v(" "),s("li",[s("code",[t._v("outerHTML")]),t._v("包含元素完整的 HTML。")]),t._v(" "),s("li",[s("code",[t._v("textContent")]),t._v("返回元素的文本信息，去掉所有的 "),s("code",[t._v("<tags>")]),t._v(" 。所有字符都当做字面量处理。")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[s("code",[t._v("nodeValue")]),t._v(" 与 "),s("code",[t._v("data")]),t._v("：文本节点内容")])]),t._v(" "),s("p",[t._v("用于获取文本节点的属性。")]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[s("code",[t._v("hidden")]),t._v(" 属性：指定 DOM 元素是否可见。")]),t._v(" "),s("li",[t._v("更多属性")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("value")]),t._v(" ——获取 "),s("code",[t._v("HTMLInputElement")]),t._v("的值。")]),t._v(" "),s("li",[s("code",[t._v("href")]),t._v(" ——获取 "),s("code",[t._v("<a>")]),t._v("的链接。")])]),t._v(" "),s("h2",{attrs:{id:"dom-操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom-操作"}},[t._v("#")]),t._v(" DOM 操作")]),t._v(" "),s("p",[t._v("常见操作：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" div "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" div"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("className "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alert alert-success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" div"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(' "\n  '),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("strong"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Hi there"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("strong"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" You've read an important message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v('"'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"旧的插值方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#旧的插值方法"}},[t._v("#")]),t._v(" 旧的插值方法")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("parentElem.appendChild(node)")])]),t._v(" "),s("li",[s("code",[t._v("parentElem.insertBefore(node)")])]),t._v(" "),s("li",[s("code",[t._v("parentElem.replaceChild(node)")])]),t._v(" "),s("li",[s("code",[t._v("parentElem.removeChild(node)")])])]),t._v(" "),s("p",[t._v("缺点：不够灵活，删除节点或者插入节点需要操作父节点。")]),t._v(" "),s("h3",{attrs:{id:"新的插值方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新的插值方法"}},[t._v("#")]),t._v(" 新的插值方法")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("node.append(...nodes or strings)")]),t._v(" —— 在 "),s("code",[t._v("node")]),t._v(" 末尾插入节点或者字符串，")]),t._v(" "),s("li",[s("code",[t._v("node.prepend(...nodes or strings)")]),t._v(" —— 在 "),s("code",[t._v("node")]),t._v(" 开头插入节点或者字符串，")]),t._v(" "),s("li",[s("code",[t._v("node.before(...nodes or strings)")]),t._v(" —— 在 "),s("code",[t._v("node")]),t._v(" 前面插入节点或者字符串，")]),t._v(" "),s("li",[s("code",[t._v("node.after(...nodes or strings)")]),t._v(" —— 在 "),s("code",[t._v("node")]),t._v(" 后面插入节点或者字符串，")]),t._v(" "),s("li",[s("code",[t._v("node.replaceWith(...nodes or strings)")]),t._v(" —— 将 "),s("code",[t._v("node")]),t._v(" 替换为节点或者字符串。")]),t._v(" "),s("li",[s("code",[t._v("node.remove()")]),t._v(" ——从当前位置移除 "),s("code",[t._v("node")]),t._v(" 。")])]),t._v(" "),s("p",[t._v("缺点：字符串以安全的方式插入到页面中，就像调用 "),s("code",[t._v("elem.textContent")]),t._v("  方法一样。")]),t._v(" "),s("h3",{attrs:{id:"insertadjacenthtml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#insertadjacenthtml"}},[t._v("#")]),t._v(" insertAdjacentHTML")]),t._v(" "),s("p",[s("code",[t._v("elem.insertAdjacentHTML(where, html)")]),t._v("  方法第一个参数是代码字符串，指定相对于 "),s("code",[t._v("elem")]),t._v(" 的插入位置，必须是以下四个值之一：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v('"beforebegin"')]),t._v(" —— 在 "),s("code",[t._v("elem")]),t._v(" 开头位置前插入 "),s("code",[t._v("html")]),t._v("，")]),t._v(" "),s("li",[s("code",[t._v('"afterbegin"')]),t._v(" —— 在 "),s("code",[t._v("elem")]),t._v(" 开头位置后插入 "),s("code",[t._v("html")]),t._v("（译注：即 "),s("code",[t._v("elem")]),t._v(" 元素内部的第一个子节点之前），")]),t._v(" "),s("li",[s("code",[t._v('"beforeend"')]),t._v(" —— 在 "),s("code",[t._v("elem")]),t._v(" 结束位置前插入 "),s("code",[t._v("html")]),t._v("（译注：即 "),s("code",[t._v("elem")]),t._v(" 元素内部的最后一个子节点之后），")]),t._v(" "),s("li",[s("code",[t._v('"afterend"')]),t._v(" —— 在 "),s("code",[t._v("elem")]),t._v(" 结束位置后插入 "),s("code",[t._v("html")]),t._v("。")])]),t._v(" "),s("p",[t._v("变种：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("elem.insertAdjacentText(where, text)")]),t._v(" ——作为文本插入")]),t._v(" "),s("li",[s("code",[t._v("elem.insertAdjacentElement(where, elem)")]),t._v(" ——插入元素")])]),t._v(" "),s("h3",{attrs:{id:"克隆节点：clonenode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#克隆节点：clonenode"}},[t._v("#")]),t._v(" 克隆节点：cloneNode")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("elem.cloneNode(true)")]),t._v(" 方法用来对一个元素进行“深”克隆 —— 包括所有特性和子元素。"),s("code",[t._v("elem.cloneNode(false)")]),t._v(" 方法只克隆该元素本身，不对子元素进行克隆。")])]),t._v(" "),s("h2",{attrs:{id:"样式操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#样式操作"}},[t._v("#")]),t._v(" 样式操作")]),t._v(" "),s("h3",{attrs:{id:"两种方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#两种方式"}},[t._v("#")]),t._v(" 两种方式")]),t._v(" "),s("ul",[s("li",[t._v("内联样式： "),s("code",[t._v('<div style="...">')])]),t._v(" "),s("li",[t._v("引用 CSS 类： "),s("code",[t._v('<div class="...">')])])]),t._v(" "),s("h3",{attrs:{id:"classname-和-classlist"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classname-和-classlist"}},[t._v("#")]),t._v(" className 和 classList")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("classsName")]),t._v(" ——获取元素的 "),s("code",[t._v("class")]),t._v("  属性，字符串。")]),t._v(" "),s("li",[s("code",[t._v("classList")]),t._v(" ——获取元素的 "),s("code",[t._v("classList")]),t._v("  列表。")])]),t._v(" "),s("p",[s("code",[t._v("classList")]),t._v("  方法：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v('elem.classList.add/remove("class")')]),t._v(" —— 添加/移除类。")]),t._v(" "),s("li",[s("code",[t._v('elem.classList.toggle("class")')]),t._v(" —— 如果类存在就移除，否则添加。")]),t._v(" "),s("li",[s("code",[t._v('elem.classList.contains("class")')]),t._v(" —— 返回 "),s("code",[t._v("true/false")]),t._v("，检查给定类。")])]),t._v(" "),s("h3",{attrs:{id:"元素样式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#元素样式"}},[t._v("#")]),t._v(" 元素样式")]),t._v(" "),s("p",[s("code",[t._v("elem.style")]),t._v("  属性是一个对象，它对应与 "),s("code",[t._v("style")]),t._v("  特性中所写的内容。访问时需要使用 "),s("code",[t._v("camelCase")]),t._v("  命名法。")]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[t._v("background-color  => elem.style.backgroundColor\nz-index           => elem.style.zIndex\nborder-left-width => elem.style.borderLeftWidth\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[s("strong",[t._v("注意： "),s("code",[t._v("style")]),t._v("  属性仅对 "),s("code",[t._v("style")]),t._v("  属性值进行操作，而不是任何 CSS 级联")])]),t._v(" "),s("h3",{attrs:{id:"计算样式-getcomputedstyle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#计算样式-getcomputedstyle"}},[t._v("#")]),t._v(" 计算样式: getComputedStyle")]),t._v(" "),s("p",[s("code",[t._v("getComputedStyle(element[, pseudo])")]),t._v("  返回与 "),s("code",[t._v("style")]),t._v("  对象类似且包含了所有类的对象，是只读的。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("element")]),t._v(" ——读取样式值的元素。")]),t._v(" "),s("li",[s("code",[t._v("pseudi")]),t._v(" ——伪元素")])]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("body")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" red"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" computedStyle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getComputedStyle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 现在我们可以读出页边距和颜色了")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("computedStyle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("marginTop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5px")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("computedStyle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rgb(255, 0, 0)")]),t._v("\n  ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("计算值与解析值")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("computed")]),t._v(" 样式值是应用所有 CSS 规则和 CSS 继承之后的值，这是 CSS 级联的结果。它可以是 "),s("code",[t._v("height:1em")]),t._v(" 或者 "),s("code",[t._v("font-size:125%")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("resolved")]),t._v(" 样式值最终应用于元素值。像 "),s("code",[t._v("1em")]),t._v(" 或者 "),s("code",[t._v("125%")]),t._v(" 这样的值都是相对的。浏览器会进行值计算，然后对其进行 "),s("code",[t._v("fixed")]),t._v(" 和 "),s("code",[t._v("absolute")]),t._v("，例如："),s("code",[t._v("height:20px")]),t._v(" 或 "),s("code",[t._v("font-size:16px")]),t._v("。对于几何属性，解析值可能是一个浮点，如"),s("code",[t._v("width:50.5px")]),t._v("。")])]),t._v(" "),s("p",[s("code",[t._v("getComputedStyle")]),t._v("实际上返回的是属性的解析值。")])]),t._v(" "),s("h2",{attrs:{id:"元素的尺寸与滚动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#元素的尺寸与滚动"}},[t._v("#")]),t._v(" 元素的尺寸与滚动")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://allin-bucket.oss-cn-beijing.aliyuncs.com/blog/dom-%E5%85%83%E7%B4%A0%E7%9A%84%E5%B0%BA%E5%AF%B8-2019-12-25.png?x-oss-process=style/alin",alt:"dom-元素的尺寸-2019-12-25.png"}})]),t._v(" "),s("ul",[s("li",[s("code",[t._v("offsetLeft")]),t._v(" / "),s("code",[t._v("offsetTop")]),t._v(" ——提供相对于元素左上角的 x/y 坐标。")]),t._v(" "),s("li",[s("code",[t._v("offsetWidth")]),t._v(" / "),s("code",[t._v("offsetHeight")]),t._v(" ——它们提供元素的“外部”宽度/高度。换句话说，它的完整大小包括边框。")]),t._v(" "),s("li",[s("code",[t._v("clientLeft")]),t._v(" / "),s("code",[t._v("clientTop")]),t._v(" ——内侧与外侧的相对坐标。")]),t._v(" "),s("li",[s("code",[t._v("clientWidth")]),t._v("  / "),s("code",[t._v("clientHeight")]),t._v(" ——提供元素边框内区域的大小。包含内容宽度与内填充宽度，不包含滚动条宽度。")]),t._v(" "),s("li",[s("code",[t._v("scrollWidth")]),t._v(" / "),s("code",[t._v("scrollHeight")]),t._v(" ——包含滚动（隐藏部分）")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://allin-bucket.oss-cn-beijing.aliyuncs.com/blog/dom-%E5%85%83%E7%B4%A0%E7%9A%84%E6%BB%9A%E5%8A%A8-2019-12-25.png?x-oss-process=style/alin",alt:"dom-元素的滚动-2019-12-25.png"}})]),t._v(" "),s("ul",[s("li",[s("code",[t._v("scrollLeft")]),t._v(" / "),s("code",[t._v("scrollTop")]),t._v(" ——可修改。\n将 "),s("code",[t._v("scrollTop")]),t._v(" 设置为 "),s("code",[t._v("0")]),t._v(" 或 "),s("code",[t._v("Infinity")]),t._v(" 将使元素分别滚动到顶部/底部。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://allin-bucket.oss-cn-beijing.aliyuncs.com/blog/dom-%E5%85%83%E7%B4%A0%E7%9A%84%E6%BB%9A%E5%8A%A82-2019-12-25.png?x-oss-process=style/alin",alt:"dom-元素的滚动2-2019-12-25.png"}})]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("CSS 宽度与 clientWidth 的不同点")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("clientWidth")]),t._v(" 值是数值，然而 "),s("code",[t._v("getComputedStyle(elem).width")]),t._v(" 返回一个包含 "),s("code",[t._v("px")]),t._v(" 的字符串。")]),t._v(" "),s("li",[s("code",[t._v("getComputedStyle")]),t._v(" 可能返回非数值的结果，例如内联元素的 "),s("code",[t._v('"auto"')]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("clientWidth")]),t._v(" 是元素的内部内容区域加上内间距，而 CSS 宽度（具有标准的 "),s("code",[t._v("box-sizing")]),t._v("）是内部"),s("strong",[t._v("不包括内间距")]),t._v("的空间区域。")]),t._v(" "),s("li",[t._v("如果有一个滚动条，一般浏览器保留它的空间，有的浏览器从 CSS 宽度中减去这个空间（因为它不再用于内容），而有些则不这样做。"),s("code",[t._v("clientWidth")]),t._v(" 属性总是相同的：如果保留了滚动条，那么它的宽度将被删去。")])])]),t._v(" "),s("h2",{attrs:{id:"window-尺寸与滚动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#window-尺寸与滚动"}},[t._v("#")]),t._v(" window 尺寸与滚动")]),t._v(" "),s("h3",{attrs:{id:"窗口的宽度-高度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#窗口的宽度-高度"}},[t._v("#")]),t._v(" 窗口的宽度/高度")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("documentElement.clientWidth")]),t._v(" / "),s("code",[t._v("documentElement.clientHeight")]),t._v(" —— "),s("code",[t._v("documentElement")]),t._v("  元素的宽高，包含滚动条。")]),t._v(" "),s("li",[s("code",[t._v("window.innerWidth / Height")]),t._v(" ——不包含滚动条的窗口尺寸。")])]),t._v(" "),s("h3",{attrs:{id:"文档的宽度-高度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档的宽度-高度"}},[t._v("#")]),t._v(" 文档的宽度/高度")]),t._v(" "),s("p",[t._v("要获得可靠的窗口大小，应该采用这些属性的最大值：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" scrollHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("max")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Full document height, with scrolled out part: '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" scrollHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h3",{attrs:{id:"获取当前滚动状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取当前滚动状态"}},[t._v("#")]),t._v(" 获取当前滚动状态")]),t._v(" "),s("ul",[s("li",[t._v("常规元素： "),s("code",[t._v("elem.scrollLeft/scrollTop")])]),t._v(" "),s("li",[t._v("文档：使用 "),s("code",[t._v("document.body")]),t._v("  代替有 bugs 的  "),s("code",[t._v("documentElement.scrollTop/Left")]),t._v(" ，也可以使用特殊属性 "),s("code",[t._v("window,pageXOffset/pageYOffset")])])]),t._v(" "),s("h3",{attrs:{id:"滚动到位置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#滚动到位置"}},[t._v("#")]),t._v(" 滚动到位置")]),t._v(" "),s("p",[t._v("注意：尽量不使用修改  "),s("code",[t._v("documentElement.scrollLeft/Top")]),t._v("  和 "),s("code",[t._v("document.body.scrollLeft/Top")]),t._v("  的方法滚动到某一个位置。")]),t._v(" "),s("p",[t._v("更加通用的解决方案：使用 "),s("code",[t._v("window.scrollBy(x, y)")]),t._v("  和 "),s("code",[t._v("window.scrollTo(pageX, pageY)")])]),t._v(" "),s("h3",{attrs:{id:"滚动到视图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#滚动到视图"}},[t._v("#")]),t._v(" 滚动到视图")]),t._v(" "),s("p",[t._v("调用 "),s("code",[t._v("elem.scrollIntoView(top)")]),t._v(" 会使 "),s("code",[t._v("elem")]),t._v(" 滚动到可视范围。它有一个结论：")]),t._v(" "),s("ul",[s("li",[t._v("如果 "),s("code",[t._v("top=true")]),t._v("（默认值），页面滚动使 "),s("code",[t._v("elem")]),t._v(" 会出现到窗口顶部。元素的上边缘与窗口顶部对齐。")]),t._v(" "),s("li",[t._v("如果 "),s("code",[t._v("top=false")]),t._v("，则页面滚动使 "),s("code",[t._v("elem")]),t._v(" 会出现在窗口底部。元素的下边缘与窗口底部对齐。")])]),t._v(" "),s("h3",{attrs:{id:"禁止滚动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#禁止滚动"}},[t._v("#")]),t._v(" 禁止滚动")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("overflow "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hidden'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 禁止滚动")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("overflow "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 恢复滚动")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h2",{attrs:{id:"坐标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#坐标"}},[t._v("#")]),t._v(" 坐标")]),t._v(" "),s("p",[t._v("大多数 JavaScript 方法处理的是以下两种坐标系中的一个：")]),t._v(" "),s("ol",[s("li",[t._v("相对于窗口（或者另一个 viewport）顶部/左侧计算的坐标")]),t._v(" "),s("li",[t._v("相对于文档顶部/左侧计算的坐标")])]),t._v(" "),s("h3",{attrs:{id:"窗口坐标：getboundingclientrect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#窗口坐标：getboundingclientrect"}},[t._v("#")]),t._v(" 窗口坐标：getBoundingClientRect")]),t._v(" "),s("p",[t._v("窗口的坐标是从窗口的左上角开始计算的。"),s("code",[t._v("elem.getBoundingClientRect()")]),t._v(" 方法返回一个 "),s("code",[t._v("elem")]),t._v(" 的窗口坐标对象，这个对象有以下这些属性：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("top")]),t._v(" — 元素顶部边缘的 Y 坐标")]),t._v(" "),s("li",[s("code",[t._v("left")]),t._v(" — 元素左边边缘的 X 坐标")]),t._v(" "),s("li",[s("code",[t._v("right")]),t._v(" — 元素右边边缘的 X 坐标")]),t._v(" "),s("li",[s("code",[t._v("bottom")]),t._v(" — 元素底部边缘的 Y 坐标")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://allin-bucket.oss-cn-beijing.aliyuncs.com/blog/dom-%E5%85%83%E7%B4%A0%E7%9A%84%E7%AA%97%E5%8F%A3%E5%9D%90%E6%A0%87-2019-12-25.png?x-oss-process=style/alin",alt:"dom-元素的窗口坐标-2019-12-25.png"}})]),t._v(" "),s("p",[s("strong",[t._v("注意：坐标的右/底部和 CSS 中的属性是不同的。")])]),t._v(" "),s("h3",{attrs:{id:"elementfrompoint-x-y"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elementfrompoint-x-y"}},[t._v("#")]),t._v(" elementFromPoint(x, y)")]),t._v(" "),s("p",[t._v("调用 "),s("code",[t._v("document.elementFromPoint(x, y)")]),t._v(" 方法返回窗口坐标 "),s("code",[t._v("(x, y)")]),t._v(" 中最顶层的元素。")]),t._v(" "),s("p",[s("strong",[t._v("注意：对于在窗口之外的坐标， "),s("code",[t._v("elementFromPoint")]),t._v("  返回 "),s("code",[t._v("null")])])]),t._v(" "),s("h3",{attrs:{id:"文档坐标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档坐标"}},[t._v("#")]),t._v(" 文档坐标")]),t._v(" "),s("ul",[s("li",[t._v("文档相对坐标是从文档的左上角开始计算，而不是窗口。")]),t._v(" "),s("li",[t._v("在 CSS 中，窗口坐标对应的是 "),s("code",[t._v("position:fixed")]),t._v("，而文档坐标则类似顶部的 "),s("code",[t._v("position:absolute")]),t._v("。")]),t._v(" "),s("li",[t._v("我们可以使用 "),s("code",[t._v("position:absolute")]),t._v(" 和 "),s("code",[t._v("top/left")]),t._v(" 来把一些东西放到文档中的固定位置，以便在页面滚动时元素仍能保留在那里。但是我们首先需要正确的坐标。")]),t._v(" "),s("li",[t._v("为了清楚起见我们把窗口坐标叫做 "),s("code",[t._v("(clientX,clientY)")]),t._v(" 把文档坐标叫做 "),s("code",[t._v("(pageX,pageY)")]),t._v("。")])]),t._v(" "),s("h3",{attrs:{id:"获取文档坐标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取文档坐标"}},[t._v("#")]),t._v(" 获取文档坐标")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("pageY")]),t._v("  = "),s("code",[t._v("clientY")]),t._v(" + 文档垂直部分滚动的高度。")]),t._v(" "),s("li",[s("code",[t._v("pageX")]),t._v("  = "),s("code",[t._v("clientX")]),t._v(" + 文档水平部分滚动的宽度。")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取元素的文档坐标")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCoords")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("elem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" box "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBoundingClientRect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" box"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" pageYOffset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" box"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" pageXOffset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);